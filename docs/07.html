---

title: day 7


keywords: fastai
sidebar: home_sidebar



nb_path: "07.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 07.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="part-1">part 1<a class="anchor-link" href="#part-1"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^\w+ \w+&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(\d+) (\w+ \w+)&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">open</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">xs_test</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="s2">&quot;./data/07_test.txt&quot;</span><span class="p">)</span>
<span class="n">xs_test</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;light red&#39;: [(&#39;1&#39;, &#39;bright white&#39;), (&#39;2&#39;, &#39;muted yellow&#39;)],
 &#39;dark orange&#39;: [(&#39;3&#39;, &#39;bright white&#39;), (&#39;4&#39;, &#39;muted yellow&#39;)],
 &#39;bright white&#39;: [(&#39;1&#39;, &#39;shiny gold&#39;)],
 &#39;muted yellow&#39;: [(&#39;2&#39;, &#39;shiny gold&#39;), (&#39;9&#39;, &#39;faded blue&#39;)],
 &#39;shiny gold&#39;: [(&#39;1&#39;, &#39;dark olive&#39;), (&#39;2&#39;, &#39;vibrant plum&#39;)],
 &#39;dark olive&#39;: [(&#39;3&#39;, &#39;faded blue&#39;), (&#39;4&#39;, &#39;dotted black&#39;)],
 &#39;vibrant plum&#39;: [(&#39;5&#39;, &#39;faded blue&#39;), (&#39;6&#39;, &#39;dotted black&#39;)],
 &#39;faded blue&#39;: [],
 &#39;dotted black&#39;: []}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">p1</span><span class="p">(</span><span class="n">bag</span><span class="p">,</span> <span class="n">bags</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">_bag</span><span class="p">,</span> <span class="n">contains</span> <span class="ow">in</span> <span class="n">bags</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">contain</span><span class="p">)</span> <span class="ow">in</span> <span class="n">contains</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">contain</span> <span class="o">==</span> <span class="n">bag</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_bag</span><span class="p">)</span>
                <span class="n">p1</span><span class="p">(</span><span class="n">_bag</span><span class="p">,</span> <span class="n">bags</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">p1</span><span class="p">(</span><span class="s2">&quot;shiny gold&quot;</span><span class="p">,</span> <span class="n">xs_test</span><span class="p">,</span> <span class="nb">set</span><span class="p">()))</span> <span class="o">==</span> <span class="mi">4</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">xs</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="s2">&quot;./data/07.txt&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Note:</strong> in the first attempt I got 130, because I forgot setting <code>result</code> to an empty set.  Global mutable state was the root of that evil.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">p1</span><span class="p">(</span><span class="s2">&quot;shiny gold&quot;</span><span class="p">,</span> <span class="n">xs</span><span class="p">,</span> <span class="nb">set</span><span class="p">()))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>126</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="part-2">part 2<a class="anchor-link" href="#part-2"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">p2</span><span class="p">(</span><span class="n">bag</span><span class="p">,</span> <span class="n">bags</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">amount</span><span class="p">,</span> <span class="n">_bag</span> <span class="ow">in</span> <span class="n">bags</span><span class="p">[</span><span class="n">bag</span><span class="p">]:</span>
        <span class="k">yield</span> <span class="nb">int</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">amount</span><span class="p">)):</span>
            <span class="k">yield from</span> <span class="n">p2</span><span class="p">(</span><span class="n">_bag</span><span class="p">,</span> <span class="n">bags</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="nb">sum</span><span class="p">(</span><span class="n">p2</span><span class="p">(</span><span class="s2">&quot;shiny gold&quot;</span><span class="p">,</span> <span class="n">xs_test</span><span class="p">))</span> <span class="o">==</span> <span class="mi">32</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">sum</span><span class="p">(</span><span class="n">p2</span><span class="p">(</span><span class="s2">&quot;shiny gold&quot;</span><span class="p">,</span> <span class="n">xs</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>220149</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

